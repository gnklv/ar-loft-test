(function(e){function t(t){for(var n,i,l=t[0],s=t[1],c=t[2],u=0,m=[];u<l.length;u++)i=l[u],r[i]&&m.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"307b":function(e,t,a){e.exports=a.p+"img/usdz.48a7ef85.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=a("8c4f"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Gallery")},i=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{wrap:""}},[e.isLoading?a("SvgLoader"):e._l(e.models,function(t){return a("v-flex",{key:t.key,staticClass:"pa-2",attrs:{xs12:"",sm6:"",md3:""}},[a("a",{staticClass:"card",attrs:{rel:"ar",href:t.url}},[a("img",{staticStyle:{display:"none"},attrs:{src:"",alt:""}}),a("v-card",{attrs:{flat:""}},[a("div",{staticClass:"card__preview",style:{"background-image":"url("+t.preview+")"}},[t.preview?e._e():a("div",{staticClass:"card__preview-stub"},[a("svg",{staticStyle:{fill:"#e5e5e5"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 500 500"}},[a("path",{attrs:{d:"M215.433 300.489v-2.563c0-5.45-3.017-8.118-8.558-8.118l-4.506.005c-5.557 0-8.573 2.663-8.573 8.113v8.02h34.66l-.005-5.449-13.018-.008zm-4.953.007h-11.732v-2.577c0-1.731.788-2.669 3.269-2.669h5.201c2.469 0 3.263.938 3.263 2.669v2.577zM214.344 279.726c-.005-2.469 1.195-3.566 4.408-3.566h5.442c2.816 0 3.376-.198 4.257-.493v-5.542c-1.288.552-2.525.595-4.205.605l-5.338-.011c-3.621.011-6.245.891-7.385 3.616-1.135-2.421-3.468-3.567-7.025-3.567h-2.732c-5.337 0-7.969 2.424-7.969 8.063v8.229l34.655-.011.005-5.444h-14.112v-1.879zm-4.948 1.878l-10.648.004v-2.618c0-1.926 1.089-2.774 3.565-2.768h3.414c2.779 0 3.669 1.232 3.675 3.251l-.006 2.131zM220.133 251.092h-18.011c-5.55 0-8.714 2.924-8.714 8.263-.009 5.354 3.164 8.276 8.714 8.276h18.011c5.555 0 8.721-2.923 8.715-8.276 0-5.339-3.16-8.263-8.715-8.263zm.352 11.089h-18.712c-2.484 0-3.413-1.089-3.422-2.826.009-1.718.938-2.821 3.414-2.817l18.72-.004c2.468.004 3.412 1.104 3.412 2.83 0 1.728-.934 2.817-3.412 2.817zM220.133 232.196c-9.891 0-11.235 10.654-18.368 10.654-2.476-.01-3.414-.998-3.414-2.725.009-1.738.949-2.726 3.414-2.726h1.437v-5.15h-1.08c-5.55 0-8.723 2.715-8.723 8.021.009 5.305 3.173 8.02 8.723 8.02 9.889 0 11.23-10.643 18.363-10.643 2.478 0 3.36 1.084 3.364 2.821-.004 1.728-.896 2.826-3.364 2.826h-2.484v5.141h2.135c5.542 0 8.712-2.768 8.718-8.111 0-5.36-3.166-8.128-8.721-8.128zM193.796 213.867v16.828l4.952-.01v-5.681h29.703l.005-5.45h-29.708v-5.697zM202.122 211.945h18.011c5.555 0 8.715-2.914 8.715-8.262 0-5.343-3.16-8.257-8.715-8.257l-18.016-.01c-5.545.01-8.718 2.934-8.709 8.267 0 5.348 3.164 8.262 8.714 8.262zm-.357-11.079h18.725c2.464 0 3.408 1.095 3.413 2.817-.005 1.729-.949 2.821-3.417 2.832h-18.712c-2.484 0-3.413-1.103-3.422-2.832-.001-1.732.948-2.817 3.413-2.817zM253.626 225.116h-8.96v-29.69l-5.45-.01v34.65h14.42zM263.815 230.865c5.333 0 8.266-3.161 8.266-8.718l-.008-18.014c.008-5.547-2.925-8.708-8.269-8.717-5.341 0-8.263 3.17-8.263 8.717v18.02c.001 5.542 2.917 8.712 8.274 8.712zm-.01-30.489c1.732 0 2.828.94 2.828 3.403v18.726c0 2.464-1.096 3.408-2.828 3.408-1.729 0-2.822-.944-2.811-3.412l-.012-18.722c0-2.463 1.086-3.411 2.823-3.403zM281.003 215.764h7.033l.009-4.951h-7.042v-10.437h8.962v-4.96l-14.395.01-.007 34.64h5.44zM296.689 230.066h5.446l-.011-29.2h5.693v-5.44l-16.82-.01-.005 5.45 5.697.005zM239.216 237.347l.009 68.599h68.592l.008-68.599h-68.609zm30.897 34.206l-25.931 25.931-.008-51.87 25.939 25.939zm-22.241-29.251h51.494l-25.749 25.747-25.745-25.747zm25.746 32.756l25.931 25.931h-51.864l25.933-25.931zm3.504-3.504l25.745-25.744-.006 51.484-25.739-25.74z"}})])])]),a("v-layout",{attrs:{"justify-center":"","pa-2":""}},[a("h3",{staticClass:"subheading"},[e._v(e._s(t.name))])])],1)],1)])})],2)},s=[],c=(a("96cf"),a("3b8d")),d=a("cebc"),u=a("2f62"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("svg",{staticClass:"svg-loader",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500"}},[a("path",{attrs:{d:"M215.433 300.489v-2.563c0-5.45-3.017-8.118-8.558-8.118l-4.506.005c-5.557 0-8.573 2.663-8.573 8.113v8.02h34.66l-.005-5.449-13.018-.008zm-4.953.007h-11.732v-2.577c0-1.731.788-2.669 3.269-2.669h5.201c2.469 0 3.263.938 3.263 2.669v2.577zM214.344 279.726c-.005-2.469 1.195-3.566 4.408-3.566h5.442c2.816 0 3.376-.198 4.257-.493v-5.542c-1.288.552-2.525.595-4.205.605l-5.338-.011c-3.621.011-6.245.891-7.385 3.616-1.135-2.421-3.468-3.567-7.025-3.567h-2.732c-5.337 0-7.969 2.424-7.969 8.063v8.229l34.655-.011.005-5.444h-14.112v-1.879zm-4.948 1.878l-10.648.004v-2.618c0-1.926 1.089-2.774 3.565-2.768h3.414c2.779 0 3.669 1.232 3.675 3.251l-.006 2.131zM220.133 251.092h-18.011c-5.55 0-8.714 2.924-8.714 8.263-.009 5.354 3.164 8.276 8.714 8.276h18.011c5.555 0 8.721-2.923 8.715-8.276 0-5.339-3.16-8.263-8.715-8.263zm.352 11.089h-18.712c-2.484 0-3.413-1.089-3.422-2.826.009-1.718.938-2.821 3.414-2.817l18.72-.004c2.468.004 3.412 1.104 3.412 2.83 0 1.728-.934 2.817-3.412 2.817zM220.133 232.196c-9.891 0-11.235 10.654-18.368 10.654-2.476-.01-3.414-.998-3.414-2.725.009-1.738.949-2.726 3.414-2.726h1.437v-5.15h-1.08c-5.55 0-8.723 2.715-8.723 8.021.009 5.305 3.173 8.02 8.723 8.02 9.889 0 11.23-10.643 18.363-10.643 2.478 0 3.36 1.084 3.364 2.821-.004 1.728-.896 2.826-3.364 2.826h-2.484v5.141h2.135c5.542 0 8.712-2.768 8.718-8.111 0-5.36-3.166-8.128-8.721-8.128zM193.796 213.867v16.828l4.952-.01v-5.681h29.703l.005-5.45h-29.708v-5.697zM202.122 211.945h18.011c5.555 0 8.715-2.914 8.715-8.262 0-5.343-3.16-8.257-8.715-8.257l-18.016-.01c-5.545.01-8.718 2.934-8.709 8.267 0 5.348 3.164 8.262 8.714 8.262zm-.357-11.079h18.725c2.464 0 3.408 1.095 3.413 2.817-.005 1.729-.949 2.821-3.417 2.832h-18.712c-2.484 0-3.413-1.103-3.422-2.832-.001-1.732.948-2.817 3.413-2.817zM253.626 225.116h-8.96v-29.69l-5.45-.01v34.65h14.42zM263.815 230.865c5.333 0 8.266-3.161 8.266-8.718l-.008-18.014c.008-5.547-2.925-8.708-8.269-8.717-5.341 0-8.263 3.17-8.263 8.717v18.02c.001 5.542 2.917 8.712 8.274 8.712zm-.01-30.489c1.732 0 2.828.94 2.828 3.403v18.726c0 2.464-1.096 3.408-2.828 3.408-1.729 0-2.822-.944-2.811-3.412l-.012-18.722c0-2.463 1.086-3.411 2.823-3.403zM281.003 215.764h7.033l.009-4.951h-7.042v-10.437h8.962v-4.96l-14.395.01-.007 34.64h5.44zM296.689 230.066h5.446l-.011-29.2h5.693v-5.44l-16.82-.01-.005 5.45 5.697.005zM239.216 237.347l.009 68.599h68.592l.008-68.599h-68.609zm30.897 34.206l-25.931 25.931-.008-51.87 25.939 25.939zm-22.241-29.251h51.494l-25.749 25.747-25.745-25.747zm25.746 32.756l25.931 25.931h-51.864l25.933-25.931zm3.504-3.504l25.745-25.744-.006 51.484-25.739-25.74z"}})])},p=[],v={name:"SvgLoader"},h=v,f=(a("5e02"),a("2877")),g=Object(f["a"])(h,m,p,!1,null,null,null),b=g.exports,y={name:"Gallery",components:{SvgLoader:b},data:function(){return{isLoading:!0}},computed:Object(d["a"])({},Object(u["c"])({models:function(e){return e.models}})),created:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchModels();case 2:this.isLoading=!1;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:Object(d["a"])({},Object(u["b"])(["fetchModels"]))},w=y,x=(a("5b79"),a("6544")),M=a.n(x),k=a("b0af"),_=a("0e8f"),O=a("a722"),j=Object(f["a"])(w,l,s,!1,null,"226a5e24",null),z=j.exports;M()(j,{VCard:k["a"],VFlex:_["a"],VLayout:O["a"]});var U={name:"Home",components:{Gallery:z}},L=U,S=Object(f["a"])(L,o,i,!1,null,null,null),V=S.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container"},[a("SvgLoader")],1)},R=[],C=a("59ca"),P=a.n(C),I={name:"Model",components:{SvgLoader:b},data:function(){return{model:{url:null}}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.query.code,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,P.a.database().ref("models/".concat(t)).once("value");case 5:if(a=e.sent,n=a.val().url,r=this.$refs.container,n){e.next=10;break}return e.abrupt("return");case 10:o=document.createElement("img"),o.style.display="none",o.setAttribute("src",""),o.setAttribute("alt",""),i=document.createElement("a"),i.setAttribute("href",n),i.setAttribute("rel","ar"),i.append(o),r.append(i),i.click();case 20:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},K=I,T=Object(f["a"])(K,D,R,!1,null,null,null),F=T.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{column:""}},[a("List")],1)},$=[],A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isLoading?a("SvgLoader"):a("v-list",[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",[e._v("\n          Добавить новую модель\n        ")])],1),a("v-list-tile-action",[a("v-btn",{attrs:{icon:""},on:{click:e.addModel}},[a("v-icon",{attrs:{color:"green"}},[e._v("add")])],1)],1)],1),a("v-divider"),e._l(e.models,function(t,n){return[a("v-list-tile",{key:n,attrs:{avatar:""}},[a("v-list-tile-avatar",[t.preview?a("img",{attrs:{src:t.preview,alt:""}}):a("v-icon",[e._v("photo")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.name))])],1),a("v-list-tile-action",[a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.updateModel(t.key)}}},[a("v-icon",[e._v("edit")])],1)],1),a("v-list-tile-action",[a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.deleteModel(t.key)}}},[a("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1)],1)],1),Object.keys(e.models).indexOf(n)<Object.keys(e.models).length-1?a("v-divider",{key:"divider"+n,attrs:{inset:""}}):e._e()]})],2),a("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition"},model:{value:e.isUpdateDialog,callback:function(t){e.isUpdateDialog=t},expression:"isUpdateDialog"}},[e.isUpdateDialog?a("UpdateModel",{attrs:{modelKey:e.selectedModelKey},on:{close:function(t){e.isUpdateDialog=!1}}}):e._e()],1),a("v-dialog",{attrs:{width:"300"},model:{value:e.isDeleteDialog,callback:function(t){e.isDeleteDialog=t},expression:"isDeleteDialog"}},[a("DeleteModel",{attrs:{modelKey:e.selectedModelKey},on:{close:function(t){e.isDeleteDialog=!1}}})],1)],1)},E=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"green"}},[n("v-toolbar-title",[e._v(e._s(e.modelKey?"Редактировать модель":"Добавить модель"))]),n("v-spacer"),n("v-btn",{attrs:{icon:"",dark:"",disabled:e.isSaving},on:{click:e.onClose}},[n("v-icon",[e._v("close")])],1)],1),n("v-flex",{attrs:{xs12:"","pa-4":""}},[n("v-text-field",{attrs:{label:"Имя модели",disabled:e.isSaving},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","pa-4":""}},[e.imageUrl?n("img",{attrs:{src:e.imageUrl,height:"150"}}):e._e(),0===e.progressImage?n("v-text-field",{attrs:{label:"Выбрать картинку","prepend-icon":"attach_file",readonly:"",disabled:e.isSaving},on:{click:e.pickImage},model:{value:e.imageName,callback:function(t){e.imageName=t},expression:"imageName"}}):e._e(),e.progressImage>0?n("v-progress-linear",{attrs:{value:e.progressImage}}):e._e(),n("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:!1},on:{change:e.onImagePicked}})],1),n("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","pa-4":""}},[e.modelUrl?n("img",{attrs:{src:a("307b"),height:"50"}}):e._e(),0===e.progressModel?n("v-text-field",{attrs:{label:"Выбрать модель","prepend-icon":"attach_file",readonly:"",disabled:e.isSaving},on:{click:e.pickModel},model:{value:e.modelName,callback:function(t){e.modelName=t},expression:"modelName"}}):e._e(),e.progressModel>0?n("v-progress-linear",{attrs:{value:e.progressModel}}):e._e(),n("input",{ref:"model",staticStyle:{display:"none"},attrs:{type:"file",accept:".usdz",multiple:!1},on:{change:e.onModelPicked}})],1),n("v-flex",{attrs:{xs12:"","pa-4":""}},[n("v-btn",{attrs:{color:"primary",loading:e.isSaving,disabled:!e.valid||e.isSaving},on:{click:e.onSave}},[e._v("\n      Save\n    ")])],1)],1)},G=[],Z=(a("7f7f"),{name:"UpdateModel",props:{modelKey:{type:String,default:""}},data:function(){return{name:"",imageName:"",imageUrl:"",imageFile:"",modelName:"",modelUrl:"",modelFile:"",isSaving:!1}},computed:Object(d["a"])({},Object(u["c"])({models:function(e){return e.models},progressModel:function(e){return e.progressUpload.file},progressImage:function(e){return e.progressUpload.preview}}),{valid:function(){return!!this.name&&(!!this.imageFile||!!this.imageUrl)&&(!!this.modelFile||!!this.modelUrl)}}),mounted:function(){if(this.modelKey){var e=this.models[this.modelKey];this.name=e.name,e.url&&(this.modelName=e.name,this.modelUrl=e.url),e.preview&&(this.imageName=e.name,this.imageUrl=e.preview)}},methods:Object(d["a"])({},Object(u["b"])(["uploadModel"]),{pickImage:function(){this.$refs.image.click()},onImagePicked:function(e){var t=this,a=e.target.files;if(void 0!==a[0]){if(this.imageName=a[0].name,this.imageName.lastIndexOf(".")<=0)return;var n=new FileReader;n.readAsDataURL(a[0]),n.addEventListener("load",function(){t.imageUrl=n.result,t.imageFile=a[0]})}},pickModel:function(){this.$refs.model.click()},onModelPicked:function(e){var t=this,a=e.target.files;if(void 0!==a[0]){if(this.modelName=a[0].name,this.modelName.lastIndexOf(".")<=0)return;var n=new FileReader;n.readAsDataURL(a[0]),n.addEventListener("load",function(){t.modelUrl=n.result,t.modelFile=a[0]})}},onSave:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isSaving=!0,e.next=3,this.uploadModel({modelKey:this.modelKey,file:this.modelFile,name:this.name,preview:this.imageFile});case 3:this.isSaving=!1,this.onClose();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onClose:function(){this.name="",this.imageName="",this.imageFile="",this.imageUrl="",this.modelName="",this.modelFile="",this.modelUrl="",this.$emit("close")}})}),J=Z,Y=a("8336"),q=a("132d"),H=a("8e36"),X=a("9910"),Q=a("2677"),W=a("71d9"),ee=a("2a7f"),te=Object(f["a"])(J,B,G,!1,null,null,null),ae=te.exports;M()(te,{VBtn:Y["a"],VCard:k["a"],VFlex:_["a"],VIcon:q["a"],VProgressLinear:H["a"],VSpacer:X["a"],VTextField:Q["a"],VToolbar:W["a"],VToolbarTitle:ee["a"]});var ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"red"}},[a("v-toolbar-title",[e._v("\n      Удалить модель?\n    ")])],1),a("v-card-actions",[a("v-btn",{attrs:{icon:"",loading:e.isLoading,disabled:e.isLoading},on:{click:e.onDelete}},[a("v-icon",[e._v("done")])],1),a("v-spacer"),a("v-btn",{attrs:{icon:"",disabled:e.isLoading},on:{click:e.onClose}},[a("v-icon",[e._v("close")])],1)],1)],1)},re=[],oe={name:"DeleteModel",props:{modelKey:{type:String,default:""}},data:function(){return{isLoading:!1}},methods:Object(d["a"])({},Object(u["b"])(["deleteModel"]),{onDelete:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.deleteModel(this.modelKey);case 3:this.isLoading=!1,this.onClose();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onClose:function(){this.$emit("close")}})},ie=oe,le=a("99d9"),se=Object(f["a"])(ie,ne,re,!1,null,null,null),ce=se.exports;M()(se,{VBtn:Y["a"],VCard:k["a"],VCardActions:le["a"],VIcon:q["a"],VSpacer:X["a"],VToolbar:W["a"],VToolbarTitle:ee["a"]});var de={name:"List",components:{UpdateModel:ae,DeleteModel:ce,SvgLoader:b},computed:Object(d["a"])({},Object(u["c"])({models:function(e){return e.models}})),data:function(){return{isUpdateDialog:!1,isDeleteDialog:!1,isLoading:!0,selectedModelKey:""}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchModels();case 2:this.isLoading=!1;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:Object(d["a"])({},Object(u["b"])(["fetchModels"]),{addModel:function(){this.selectedModelKey="",this.isUpdateDialog=!0},updateModel:function(e){this.selectedModelKey=e,this.isUpdateDialog=!0},deleteModel:function(e){this.selectedModelKey=e,this.isDeleteDialog=!0}})},ue=de,me=a("169a"),pe=a("ce7e6"),ve=a("8860"),he=a("ba95"),fe=a("40fe"),ge=a("c954"),be=a("5d23"),ye=Object(f["a"])(ue,A,E,!1,null,null,null),we=ye.exports;M()(ye,{VBtn:Y["a"],VDialog:me["a"],VDivider:pe["a"],VIcon:q["a"],VList:ve["a"],VListTile:he["a"],VListTileAction:fe["a"],VListTileAvatar:ge["a"],VListTileContent:be["a"],VListTileTitle:be["b"]});var xe={name:"Admin",components:{List:we}},Me=xe,ke=Object(f["a"])(Me,N,$,!1,null,null,null),_e=ke.exports;M()(ke,{VLayout:O["a"]}),n["a"].use(r["a"]);var Oe=new r["a"]({mode:"history",routes:[{path:"/",name:"home",component:V},{path:"/model",name:"model",component:F},{path:"/admin",name:"admin",component:_e}]});n["a"].use(u["a"]);var je=new u["a"].Store({state:{models:{},progressUpload:{file:0,preview:0}},mutations:{fetchModels:function(e,t){e.models=Object.assign({},Object(d["a"])({},t))},uploadModel:function(e,t){e.models[t.key]?e.models[t.key]=Object(d["a"])({},e.models[t.key],t):n["a"].set(e.models,t.key,t)},setProgressUpload:function(e,t){var a=t.type,n=t.payload;e.progressUpload[a]=n},deleteModel:function(e,t){n["a"].delete(e.models,t)}},actions:{fetchModels:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,P.a.database().ref("models").once("value");case 3:n=e.sent,a("fetchModels",n.val());case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),uploadModel:function(e,t){var a=e.commit,n=t.file,r=t.name,o=t.preview,i=t.modelKey;return new Promise(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var l,s,u,m,p,v,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i){e.next=9;break}return e.next=3,P.a.database().ref("models").push({name:r});case 3:return l=e.sent,s=l.key,e.next=7,P.a.database().ref("models").child(s).update({key:s});case 7:e.next=12;break;case 9:return s=i,e.next=12,P.a.database().ref("models").child(s).update({name:r});case 12:u={name:r,key:s},n&&(m=n.name.slice(n.name.lastIndexOf(".")),p=P.a.storage().ref("models/".concat(s).concat(m)).put(n),a("setProgressUpload",{type:"file",payload:0}),p.on("state_changed",function(e){a("setProgressUpload",{type:"file",payload:Math.floor(e.bytesTransferred/e.totalBytes*100)})},null,Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.snapshot.ref.getDownloadURL();case 2:return t=e.sent,e.next=5,P.a.database().ref("models").child(s).update({url:t});case 5:u=Object(d["a"])({},u,{url:t}),h(o?"preview":"url");case 7:case"end":return e.stop()}},e)})))),o&&(v=P.a.storage().ref("previews/".concat(s)).put(o),a("setProgressUpload",{type:"preview",payload:0}),v.on("state_changed",function(e){a("setProgressUpload",{type:"preview",payload:Math.floor(e.bytesTransferred/e.totalBytes*100)})},null,Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.snapshot.ref.getDownloadURL();case 2:return t=e.sent,e.next=5,P.a.database().ref("models").child(s).update({preview:t});case 5:u=Object(d["a"])({},u,{preview:t}),h(n?"url":"preview");case 7:case"end":return e.stop()}},e)})))),h=function(e){u[e]&&(a("uploadModel",u),a("setProgressUpload",{type:"preview",payload:0}),a("setProgressUpload",{type:"file",payload:0}),t())},n||o||(a("uploadModel",u),t());case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},deleteModel:function(e,t){var a=e.commit;return new Promise(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.a.database().ref().child("models/".concat(t)).remove();case 2:return e.next=4,P.a.storage().ref().child("models/".concat(t,".usdz")).delete();case 4:return e.next=6,P.a.storage().ref().child("previews/".concat(t)).delete();case 6:a("deleteModel",t),n();case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}}),ze=(a("66ce"),a("588e"),{apiKey:"AIzaSyCSZCGSYOF0rIdYvOhtfu28ZZ4kReReAXo",authDomain:"ar-promo-gnklv.firebaseapp.com",databaseURL:"https://ar-promo-gnklv.firebaseio.com",projectId:"ar-promo-gnklv",storageBucket:"ar-promo-gnklv.appspot.com",messagingSenderId:"863566271465"});P.a.initializeApp(ze);var Ue=a("bb71");a("da64");n["a"].use(Ue["a"],{iconfont:"md"});var Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-content",[a("v-container",[a("router-view")],1)],1)],1)},Se=[],Ve={name:"App"},De=Ve,Re=a("7496"),Ce=a("a5238"),Pe=a("549c"),Ie=Object(f["a"])(De,Le,Se,!1,null,null,null),Ke=Ie.exports;M()(Ie,{VApp:Re["a"],VContainer:Ce["a"],VContent:Pe["a"]}),n["a"].config.productionTip=!1,new n["a"]({store:je,router:Oe,render:function(e){return e(Ke)}}).$mount("#app")},"5b79":function(e,t,a){"use strict";var n=a("884a"),r=a.n(n);r.a},"5e02":function(e,t,a){"use strict";var n=a("5ecc"),r=a.n(n);r.a},"5ecc":function(e,t,a){},"884a":function(e,t,a){}});
//# sourceMappingURL=app.a02a524d.js.map